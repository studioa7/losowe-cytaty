(function($){'use strict';function init(){var $randomizeButton=$('.randomize-button');if($randomizeButton.length){$randomizeButton.on('click',function(e){e.preventDefault();if(confirm(losoweCytatyAdmin.confirmRandomize)){randomizeQuote()}})}var $deleteQuote=$('.delete-quote');if($deleteQuote.length){$deleteQuote.on('click',function(e){if(!confirm(losoweCytatyAdmin.confirmDelete)){e.preventDefault()}})}}function randomizeQuote(){var $quoteDisplay=$('.current-quote-display');var $blockquote=$quoteDisplay.find('blockquote');var $quoteInfo=$quoteDisplay.find('.quote-info');$blockquote.css('opacity','0.5');$quoteInfo.css('opacity','0.5');$.ajax({url:losoweCytatyAdmin.ajaxUrl,type:'POST',data:{action:'losowe_cytaty_randomize',nonce:losoweCytatyAdmin.nonce},success:function(response){if(response.success){var $quoteText=$blockquote.find('p');var $quoteAuthor=$blockquote.find('cite');$quoteText.text(response.data.quote);if(response.data.author){if($quoteAuthor.length){$quoteAuthor.text('— '+response.data.author)}else{$blockquote.append('<cite>— '+response.data.author+'</cite>')}}else{$quoteAuthor.remove()}if($quoteInfo.length){$quoteInfo.text('Ostatnia zmiana: '+response.data.last_change)}showNotice(response.data.message,'success');setTimeout(function(){location.reload()},2000)}else{showNotice(response.data.message,'error')}},error:function(){showNotice('Wystąpił błąd podczas komunikacji z serwerem.','error')},complete:function(){$blockquote.css('opacity','1');$quoteInfo.css('opacity','1')}})}function showNotice(message,type){var $notice=$('<div class="notice notice-'+type+' is-dismissible"><p>'+message+'</p></div>');var $heading=$('.wrap h1');if($heading.length){$('.notice').remove();$heading.after($notice);$notice.append('<button type="button" class="notice-dismiss"><span class="screen-reader-text">Zamknij</span></button>');$notice.find('.notice-dismiss').on('click',function(){$notice.fadeOut(300,function(){$notice.remove()})})}else{console.log(message)}}$(document).ready(init)})(jQuery);